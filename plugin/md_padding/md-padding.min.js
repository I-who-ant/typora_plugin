var c=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var T=c(p=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});p.isStartCharacter=p.isEndCharacter=p.isWordBoundary=p.isAlphabet=p.isInlineBlank=p.isBlank=p.isFullwidthPunctuation=p.isCJK=p.isNumeric=p.isPunctuationCharacter=p.markdownSpecial=void 0;var Ai=/^[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-./:;<=>?@[\]^_`{|}~]$/,Ni=/^[、，：。？！；：【】（）「」﹁﹂『』《》〈〉“”‘’﹏…—～‧·]$/;p.markdownSpecial=new Set(["*","-","[","]","(",")","<",">",'"',"'","!","=","$"]);function Ot(e){return typeof e!="string"?!1:!!(Ai.exec(e)||Rt(e))}p.isPunctuationCharacter=Ot;function $i(e){return e>="0"&&e<="9"}p.isNumeric=$i;function Ei(e){return e>="\u4E00"&&e<="\u9FFF"||e>="\u3400"&&e<="\u4DBF"||e>="\uF900"&&e<="\uFAFF"}p.isCJK=Ei;function Rt(e){return!!Ni.exec(e)}p.isFullwidthPunctuation=Rt;function Lt(e){return!!/^\s$/.exec(e)}p.isBlank=Lt;function Fi(e){return e===" "||e==="	"}p.isInlineBlank=Fi;function Qi(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}p.isAlphabet=Qi;function Hi(e){return e===void 0||Lt(e)||Ot(e)}p.isWordBoundary=Hi;function Ji(e){return',;:"!'.includes(e)}p.isEndCharacter=Ji;function Ki(e){return'"'.includes(e)}p.isStartCharacter=Ki});var K=c(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.isBlockCode=g.isReferenceLink=g.isInlineCode=g.isMath=g.isLatin=g.isUnicodeString=g.isRaw=g.isBlank=g.isQuoted=g.isPunctuation=g.isCJK=g.isAlphabetNumeric=g.isDocument=void 0;function zi(e){return e.kind===32}g.isDocument=zi;function Dt(e){return e.kind===4}g.isAlphabetNumeric=Dt;function Wi(e){return e.kind===33554432}g.isCJK=Wi;function Vi(e){return e.kind===2}g.isPunctuation=Vi;function Gi(e){return e.kind===2048}g.isQuoted=Gi;function Zi(e){return e.kind===1}g.isBlank=Zi;function Xi(e){return e.kind===1048576}g.isRaw=Xi;function Tt(e){return e.kind===8}g.isUnicodeString=Tt;function Yi(e){return Tt(e)||Dt(e)}g.isLatin=Yi;function er(e){return e.kind===2097152}g.isMath=er;function tr(e){return e.kind===65536}g.isInlineCode=tr;function ir(e){return e.kind===128}g.isReferenceLink=ir;function rr(e){return e.kind===16}g.isBlockCode=rr});var Ut=c(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.InlineImage=void 0;var Fe=class{constructor(t,r,a){this.children=t,this.target=r,this.attributes=a,this.kind=262144}text(){return this.children.map(t=>t.toMarkdown()).join("")}toMarkdown(){let t=this.attributes===void 0?"":`{${this.attributes}}`;return`![${this.text()}](${this.target})${t}`}};Z.InlineImage=Fe});var At=c(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.ReferenceImage=void 0;var Qe=class{constructor(t,r,a){this.children=t,this.target=r,this.attributes=a,this.kind=524288}text(){return this.children.map(t=>t.toMarkdown()).join("")}toMarkdown(){let t=this.attributes===void 0?"":`{${this.attributes}}`;return`![${this.text()}][${this.target}]${t}`}};X.ReferenceImage=Qe});var He=c(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.AlphabetNumeric=void 0;var Nt=T(),Y=class e{constructor(t){this.children=[],this.kind=4,this.text=t}toMarkdown(){return this.text}static is(t){return typeof t!="string"?!1:(0,Nt.isAlphabet)(t)||(0,Nt.isNumeric)(t)}static create(t){return t.length>1?new e(t):(e.cache.has(t)||e.cache.set(t,new e(t)),e.cache.get(t))}};ee.AlphabetNumeric=Y;Y.cache=new Map});var Ke=c(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.UnicodeString=void 0;var Je=class{constructor(t){this.children=[],this.kind=8,this.text=t}toMarkdown(){return this.text}static is(t){if(typeof t!="string")return!1;for(let r=0;r<t.length;r++)if(t.charCodeAt(r)<256)return!1;return!0}};te.UnicodeString=Je});var A=c(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.Delimited=void 0;var ze=class{constructor(t,r){this.children=[],this.prefix=t,this.postfix=r}text(){return this.children.map(t=>t.toMarkdown()).join("")}toMarkdown(){return this.prefix+this.text()+this.postfix}};ie.Delimited=ze});var $t=c(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.SquareQuoted=void 0;var nr=A(),We=class extends nr.Delimited{constructor(t){super("[","]"),this.kind=4096,this.children=t}};re.SquareQuoted=We});var Et=c(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.Emphasis=void 0;var sr=A(),Ve=class extends sr.Delimited{constructor(t,r="*"){super(r,r),this.children=[],this.kind=32768,this.children=t,this.separator=r}};ne.Emphasis=Ve});var Ft=c(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.Quoted=void 0;var or=A(),Ge=class extends or.Delimited{constructor(t){super('"','"'),this.kind=2048,this.children=t}};se.Quoted=Ge});var Qt=c(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.Strong=void 0;var ur=A(),Ze=class extends ur.Delimited{constructor(t,r){super(r,r),this.children=[],this.kind=16384,this.children=t,this.separator=r}};oe.Strong=Ze});var Ht=c(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.Highlight=void 0;var cr=A(),Xe=class extends cr.Delimited{constructor(t){super("==","=="),this.children=[],this.kind=16777216,this.children=t}};ue.Highlight=Xe});var Jt=c(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.Strikethrough=void 0;var ar=A(),Ye=class extends ar.Delimited{constructor(t){super("~~","~~"),this.children=[],this.kind=8192,this.children=t}};ce.Strikethrough=Ye});var Kt=c(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.Document=void 0;var et=class{constructor(t){this.kind=32,this.isDoc=!0,this.children=t}toMarkdown(){return this.children.map(t=>t.toMarkdown()).join("")}};ae.Document=et});var Wt=c(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.preOrder=void 0;function zt(e,t){t(e);for(let r of e.children)zt(r,t)}le.preOrder=zt});var tt=c(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.CJK=void 0;var lr=T(),de=class e{constructor(t){this.children=[],this.kind=33554432,this.text=t}toMarkdown(){return this.text}static is(t){return typeof t!="string"?!1:(0,lr.isCJK)(t)}static create(t){return t.length>1?new e(t):(e.cache.has(t)||e.cache.set(t,new e(t)),e.cache.get(t))}};he.CJK=de;de.cache=new Map});var Gt=c($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.compactArray=$.compactTree=void 0;var dr=Ke(),hr=He(),N=K(),fr=Wt(),gr=tt();function pr(e){return(0,fr.preOrder)(e,t=>Vt(t.children)),e}$.compactTree=pr;function Vt(e){let t=0;for(let r=0;r<e.length;r++){let a=e[r];if(t-1>=0){let i=e[t-1];if((0,N.isUnicodeString)(a)&&(0,N.isUnicodeString)(i)){e[t-1]=new dr.UnicodeString(i.text+a.text);continue}if((0,N.isAlphabetNumeric)(a)&&(0,N.isAlphabetNumeric)(i)){e[t-1]=hr.AlphabetNumeric.create(i.text+a.text);continue}if((0,N.isCJK)(a)&&(0,N.isCJK)(i)){e[t-1]=gr.CJK.create(i.text+a.text);continue}}e[t++]=a}for(;e.length>t;)e.pop()}$.compactArray=Vt});var Zt=c(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.HTMLTag=void 0;var it=class{constructor(t){this.children=[],this.kind=64,this.text=t}toMarkdown(){return`<${this.text}>`}};fe.HTMLTag=it});var Xt=c(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.Punctuation=void 0;var x=T(),E=K(),ge=class e{constructor(t,r){this.children=[],this.kind=2,this.char=t,this.raw=r!=null?r:t}needPaddingAfter(t,r){return this.isFullSize()||(0,E.isPunctuation)(t)||(0,E.isAlphabetNumeric)(t)&&(0,x.isNumeric)(t.text[0])&&",.".includes(this.char)||this.char===":"&&(0,E.isAlphabetNumeric)(t)&&(0,x.isNumeric)(t.text[0])&&r&&(0,E.isAlphabetNumeric)(r)&&(0,x.isNumeric)(r.text[r.text.length-1])?!1:(0,x.isEndCharacter)(this.char)?!0:(0,x.isStartCharacter)(this.char)?!1:!!"<>=".includes(this.char)}needPaddingBefore(t,r){return this.isFullSize()||(0,E.isPunctuation)(t)||(0,E.isAlphabetNumeric)(t)&&(0,x.isNumeric)(t.text.slice(-1))&&",.".includes(this.char)?!1:(0,x.isStartCharacter)(this.char)?!0:(0,x.isEndCharacter)(this.char)?!1:!!"<>=".includes(this.char)}isFullSize(){return(0,x.isFullwidthPunctuation)(this.char)}toMarkdown(){return this.raw}static create(t,r=t){return e.cache.has(r)||e.cache.set(r,new e(t,r)),e.cache.get(r)}static is(t){return(0,x.isPunctuationCharacter)(t)}};pe.Punctuation=ge;ge.cache=new Map});var Yt=c(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.ReferenceLink=void 0;var rt=class{constructor(t,r){this.children=[],this.kind=128,this.children=t,this.target=r}text(){return this.children.map(t=>t.toMarkdown()).join("")}toMarkdown(){return`[${this.text()}][${this.target}]`}};me.ReferenceLink=rt});var ei=c(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.ReferenceDefinition=void 0;var nt=class{constructor(t,r){this.children=[],this.kind=256,this.children=t,this.target=r}text(){return this.children.map(t=>t.toMarkdown()).join("")}toMarkdown(){return`[${this.text()}]:${this.target}`}};ke.ReferenceDefinition=nt});var ti=c(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.InlineLink=void 0;var st=class{constructor(t,r){this.children=[],this.kind=512,this.children=t,this.target=r}text(){return this.children.map(t=>t.toMarkdown()).join("")}toMarkdown(){return`[${this.text()}](${this.target})`}};_e.InlineLink=st});var ii=c(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.InlineCode=void 0;var ot=class{constructor(t,r){this.children=[],this.kind=65536,this.delimiter=r,this.code=t}toMarkdown(){return this.delimiter+this.code+this.delimiter}};we.InlineCode=ot});var ri=c(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.Math=void 0;var ut=class{constructor(t,r){this.children=[],this.kind=2097152,this.delimiter=r,this.code=t}toMarkdown(){return this.delimiter+this.code+this.delimiter}};be.Math=ut});var ni=c(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.BlockCode=void 0;var ct=class{constructor(t,r,a,i=!0,k=!0){this.children=[],this.kind=16,this.delimiter=r,this.lang=t,this.children=a,this.closed=i,this.langClosed=k}getCode(){return this.children.map(t=>t.toMarkdown()).join("")}toMarkdown(){return this.delimiter+this.lang+(this.langClosed?`
`:"")+this.getCode()+(this.closed?this.delimiter:"")}};Me.BlockCode=ct});var lt=c(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.Blank=void 0;var mr=T(),at=class{constructor(t){this.children=[],this.kind=1,this.char=t}toMarkdown(){return this.char}static is(t){return typeof t!="string"?!1:(0,mr.isBlank)(t)}};Se.Blank=at});var ht=c(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.Raw=void 0;var dt=class{constructor(t){this.children=[],this.kind=1048576,this.content=t}toMarkdown(){return this.content}};Ie.Raw=dt});var oi=c(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.OrderedListItem=void 0;var si=T(),ft=class{constructor(t,r){this.children=[],this.kind=1024,this.prefix=t,this.children=r}toMarkdown(){return this.prefix+this.children.map(t=>t.toMarkdown()).join("")}static isValidPrefix(t){return(0,si.isNumeric)(t[0])&&t[1]==="."&&(0,si.isInlineBlank)(t[2])}};Pe.OrderedListItem=ft});var ui=c(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.UnorderedListItem=void 0;var kr=T(),gt=class{constructor(t,r){this.children=[],this.kind=131072,this.prefix=t,this.children=r}toMarkdown(){return this.prefix+this.children.map(t=>t.toMarkdown()).join("")}static isValidPrefix(t){return"-+*".includes(t[0])&&(0,kr.isInlineBlank)(t[1])}};ve.UnorderedListItem=gt});var ci=c(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.Callout=void 0;var pt=class{constructor(t){this.children=[],this.kind=8388608,this.text=t}toMarkdown(){return`[!${this.text}]`}};ye.Callout=pt});var ai=c(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.BlockquoteItem=void 0;var mt=class{constructor(t,r){this.children=[],this.kind=4194304,this.prefix=t,this.children=r}toMarkdown(){return this.prefix+this.children.map(t=>t.toMarkdown()).join("")}static isValidPrefix(t){return t[0]===">"}};qe.BlockquoteItem=mt});var kt=c(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.State=void 0;var _r;(function(e){e[e.LinkText=0]="LinkText",e[e.ReferingUrl=1]="ReferingUrl",e[e.ReferingID=2]="ReferingID",e[e.ReferenceLinkUrl=3]="ReferenceLinkUrl",e[e.ImageText=4]="ImageText",e[e.ImageReferingUrl=5]="ImageReferingUrl",e[e.ImageReferingID=6]="ImageReferingID",e[e.ImageAttributes=7]="ImageAttributes",e[e.HTMLTag=8]="HTMLTag",e[e.Emphasis=9]="Emphasis",e[e.Strong=10]="Strong",e[e.Strikethrough=11]="Strikethrough",e[e.InlineCode=12]="InlineCode",e[e.BlockCodeLang=13]="BlockCodeLang",e[e.Math=14]="Math",e[e.BlockCodeBody=15]="BlockCodeBody",e[e.OrderedListItem=16]="OrderedListItem",e[e.UnorderedListItem=17]="UnorderedListItem",e[e.BlockquoteItem=18]="BlockquoteItem",e[e.CalloutItem=19]="CalloutItem",e[e.Highlight=20]="Highlight",e[e.Quoted=21]="Quoted",e[e.Init=22]="Init"})(_r=z.State||(z.State={}))});var li=c(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.Stack=void 0;var _t=class{constructor(){this.data=[]}pop(){return this.data.pop()}top(){return this.data[this.size()-1]}[Symbol.iterator](){return this.data[Symbol.iterator]()}size(){return this.data.length}push(t){this.data.push(t)}};xe.Stack=_t});var di=c(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.Mask=void 0;var wt=class{constructor(){this.mask=0,this.counts=Array(32).fill(0)}add(t){for(let r=0,a=1;r<32;r++,a<<=1)t&a&&(this.counts[r]++,this.mask|=a)}remove(t){for(let r=0,a=1;r<32;r++,a<<=1)t&a&&(this.counts[r]--,this.counts[r]===0&&(this.mask&=~a))}};Ce.Mask=wt});var hi=c(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.stateMasks=void 0;var b=kt();Be.stateMasks={[b.State.InlineCode]:-33554448,[b.State.Math]:-33554448,[b.State.BlockCodeBody]:-33554448,[b.State.Emphasis]:-53312208,[b.State.Strong]:-53328592,[b.State.Strikethrough]:-53336784,[b.State.LinkText]:-53344336,[b.State.ReferingUrl]:-33554448,[b.State.ImageText]:-52558544,[b.State.ImageReferingUrl]:-33554448,[b.State.ReferenceLinkUrl]:-33554448,[b.State.HTMLTag]:-33554448,[b.State.ReferingID]:-33554448,[b.State.BlockCodeLang]:-33554448,[b.State.OrderedListItem]:-53344976,[b.State.UnorderedListItem]:-53344976,[b.State.Init]:0}});var bt=c(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.matchSubstring=void 0;function wr(e,t,r){return e.substr(t,r.length)===r}je.matchSubstring=wr});var fi=c(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.parseCode=void 0;var Q=ht(),Mt=bt(),U=It("//",["/*","*/"],[['"','"']]),St=It("//",["/*","*/"],[['"','"'],["'","'"],["`","`"]]),br=It("--",["/*","*/"],[['"','"']]),Mr={cpp:U,"c++":U,c:U,java:U,javascript:St,js:St,csharp:U,"c#":U,typescript:St,ts:U,go:U,sql:br,bash:F,shell:F,sh:F,python:F,py:F,ruby:F};function Sr(e,t,r,a){let i=Mr[t];return i?[...i(e,r,a)]:[new Q.Raw(e)]}Oe.parseCode=Sr;function It(e,t,r){return function*(i,k,y){let h=0,M=0,C=i.length;for(;h<C;){if((0,Mt.matchSubstring)(i,h,e)){let S=i.indexOf(`
`,h),I=S===-1?C:S;h+e.length>M&&(yield new Q.Raw(i.slice(M,h+e.length))),yield k(i.slice(h+e.length,I),y),M=h=I;continue}let[q,B]=t;if((0,Mt.matchSubstring)(i,h,q)){let S=i.indexOf(B,h+q.length),I=S===-1?C:S;h+q.length>M&&(yield new Q.Raw(i.slice(M,h+q.length))),yield k(i.slice(h+q.length,I),y),M=h=I;continue}for(let[S,I]of r){if(!(0,Mt.matchSubstring)(i,h,S))continue;let j=i.indexOf(I,h+S.length);h=j===-1?C:j}h++}M<C&&(yield new Q.Raw(i.slice(M,C)))}}function*F(e,t,r){let a=0,i=0,k=e.length;for(;a<k;)if(e[a]==="#"){let h=e.indexOf(`
`,a),M=h===-1?k:h;a>=i&&(yield new Q.Raw(e.slice(i,a+2))),yield t(e.slice(a+2,M),r),i=a=M}else a++;i<k&&(yield new Q.Raw(e.slice(i,k)))}});var vi=c(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.parse=void 0;var Re=T(),Ir=K(),gi=Ut(),pi=At(),mi=He(),Pr=Ke(),H=$t(),ki=Et(),vr=Ft(),yr=Qt(),qr=Ht(),xr=Jt(),_i=Kt(),wi=Gt(),Cr=Zt(),m=Xt(),Br=Yt(),bi=ei(),jr=ti(),Or=ii(),Rr=ri(),Pt=ni(),J=lt(),Le=ht(),vt=oi(),yt=ui(),Mi=ci(),qt=ai(),n=kt(),Lr=li(),Dr=di(),Si=hi(),Ii=fi(),W=bt(),Pi=tt(),xt="<!--md-padding-ignore-begin-->",Ct="<!--md-padding-ignore-end-->";function V(e,t){if(t.ignorePatterns.length){let s=t.ignorePatterns[0],u=Object.assign(Object.assign({},t),{ignorePatterns:t.ignorePatterns.slice(1)}),d=[],R=e.matchAll(s),P=0;for(let L of R){for(let Ui of V(e.slice(P,L.index),u).children)d.push(Ui);d.push(new Le.Raw(L[0])),P=L.index+L[0].length}for(let L of V(e.slice(P,e.length),u).children)d.push(L);return(0,wi.compactTree)(new _i.Document(d))}let r=new Lr.Stack,a=new Dr.Mask,i=0,k=!0,y="",h="",M="",C=">",q="**",B="*",S="`",I="```",j="$",O=[],D=[],Ee,G;for(f(n.State.Init);i<e.length;){let s=r.top().state,u=e[i],d=e.substr(i,2),R=e.substr(i,3);if(!(u===`
`&&jt()===1)){if(u==="\\"&&Re.markdownSpecial.has(e[i+1]))o(m.Punctuation.create(e[i+1],e.slice(i,i+2))),i+=2;else if(s===n.State.InlineCode&&(0,W.matchSubstring)(e,i,S))o(new Or.InlineCode(_(),S)),i+=S.length;else if(s===n.State.BlockCodeLang&&e[i]===`
`)h=_(),f(n.State.BlockCodeBody),i++;else if(s===n.State.BlockCodeBody&&R===I)o(new Pt.BlockCode(h,I,(0,Ii.parseCode)(_(),h,V,t))),i+=3;else if(s===n.State.Math&&(0,W.matchSubstring)(e,i,j))o(new Rr.Math(_(),j)),i+=j.length;else if(s===n.State.ImageAttributes&&u==="}"){let P=_();G!==void 0?(o(new pi.ReferenceImage(D,G,P)),G=void 0):(o(new gi.InlineImage(D,Ee,P)),Ee=void 0),i++}else if(s===n.State.ImageReferingID&&u==="]")d==="]{"?(G=_(),f(n.State.ImageAttributes),i+=2):(o(new pi.ReferenceImage(D,_())),i++);else if(s===n.State.ImageReferingUrl&&u===")")d==="){"?(Ee=_(),f(n.State.ImageAttributes),i+=2):(o(new gi.InlineImage(D,_())),i++);else if(s===n.State.ImageText&&u==="]")D=l(),d==="]["?(i+=2,f(n.State.ImageReferingID)):d==="]("?(i+=2,f(n.State.ImageReferingUrl)):(o(m.Punctuation.create("!"),new H.SquareQuoted(D)),i++);else if(s===n.State.CalloutItem&&u==="]")M=_(),o(new Mi.Callout(M)),i++;else if(s===n.State.ReferingID&&u==="]")o(new Br.ReferenceLink(O,_())),i++;else if(s===n.State.ReferingUrl&&u===")")o(new jr.InlineLink(O,_())),i++;else if(s===n.State.ReferenceLinkUrl&&u===`
`)o(new bi.ReferenceDefinition(O,_())),o(new J.Blank(u)),i++;else if(s===n.State.LinkText&&u==="]")O=l(),d==="]:"?(i+=2,f(n.State.ReferenceLinkUrl)):d==="]["?(i+=2,f(n.State.ReferingID)):d==="]("?(i+=2,f(n.State.ReferingUrl)):(o(new H.SquareQuoted(O)),i++);else if(s===n.State.HTMLTag&&u===">")o(new Cr.HTMLTag(_())),i++;else if(s===n.State.Emphasis&&u===B&&u==="_"&&(0,Re.isWordBoundary)(e[i+1]))o(new ki.Emphasis(l(),B)),i++;else if(s===n.State.Emphasis&&u===B&&u==="*")o(new ki.Emphasis(l(),B)),i++;else if(s===n.State.Strong&&d===q)o(new yr.Strong(l(),q)),i+=2;else if(s===n.State.Strikethrough&&d==="~~")o(new xr.Strikethrough(l())),i+=2;else if(s===n.State.Highlight&&d==="==")o(new qr.Highlight(l())),i+=2;else if(s===n.State.UnorderedListItem&&u===`
`)o(new yt.UnorderedListItem(y,l()),new J.Blank(u)),i++;else if(s===n.State.OrderedListItem&&u===`
`)o(new vt.OrderedListItem(y,l()),new J.Blank(u)),i++;else if(s===n.State.BlockquoteItem&&u===`
`)o(new qt.BlockquoteItem(C,l()),new J.Blank(u)),i++;else if(s===n.State.Quoted&&u==='"')o(new vr.Quoted(l())),i++;else if(k&&d==="[!"&&s===n.State.BlockquoteItem)f(n.State.CalloutItem),i+=2;else if(u==="["&&w(640))f(n.State.LinkText),i++;else if(d==="!["&&w(786432))f(n.State.ImageText),i+=2;else if(u==="<"&&(0,W.matchSubstring)(e,i,xt)){let P=e.indexOf(Ct,i+xt.length);if(P===-1)throw new Error(`unmatched ${xt} at ${i}`);o(new Le.Raw(e.slice(i,P+Ct.length))),i=P+Ct.length}else if(u==="<"&&w(64))f(n.State.HTMLTag),i++;else if(k&&R==="```")f(n.State.BlockCodeLang),I=R,i+=3;else if(R==="---"&&Ti())f(n.State.BlockCodeLang),I=R,i+=3;else if(d==="``"&&w(65536))S=d,f(n.State.InlineCode),i+=2;else if(u==="`"&&w(65536))S=u,f(n.State.InlineCode),i++;else if(d==="$$"&&w(2097152))j=d,f(n.State.Math),i+=2;else if(u==="$"&&w(2097152))j=u,f(n.State.Math),i++;else if(k&&yt.UnorderedListItem.isValidPrefix(d)&&w(131072)){f(n.State.UnorderedListItem),y=d,i+=2;continue}else if(k&&vt.OrderedListItem.isValidPrefix(R)&&w(1024)){f(n.State.OrderedListItem),y=R,i+=3;continue}else if(k&&qt.BlockquoteItem.isValidPrefix(d)&&w(4194304)){f(n.State.BlockquoteItem),i++;continue}else if(d==="~~"&&w(8192))f(n.State.Strikethrough),i+=2;else if((d==="**"||d==="__")&&w(16384))q=d,i+=2,f(n.State.Strong);else if(d==="=="&&w(16777216))i+=2,f(n.State.Highlight);else if(u==="*"&&w(32768))B=u,i++,f(n.State.Emphasis);else if(u==="_"&&(0,Re.isWordBoundary)(e[i-1])&&w(32768))B=u,i++,f(n.State.Emphasis);else if(u==='"'&&w(2048))f(n.State.Quoted),i++;else if((0,W.matchSubstring)(e,i,"@import")&&w(16)){let P=e.indexOf(`
`,i),L=P===-1?e.length:P;o(new Le.Raw(e.slice(i,L))),i=L}else Bt(u);u===`
`&&(k=!0),k&&!(0,Re.isBlank)(u)&&(k=!1),i>=e.length&&jt()}}for(;r.size()>1;)Li();return(0,wi.compactTree)(new _i.Document(l()));function Bt(s){Oi()||(m.Punctuation.is(s)?(o(m.Punctuation.create(s)),i++):J.Blank.is(s)?(o(new J.Blank(s)),i++):mi.AlphabetNumeric.is(s)?(o(mi.AlphabetNumeric.create(s)),i++):Pi.CJK.is(s)?(o(Pi.CJK.create(s)),i++):(o(new Pr.UnicodeString(s)),i++))}function Oi(){for(let s of t.ignoreWords)if((0,W.matchSubstring)(e,i,s))return o(new Le.Raw(s)),i+=s.length,!0;return!1}function jt(){for(;;){let s=Ri();if(s===0)return s;if(s===1)return 1}}function Ri(){switch(r.top().state){case n.State.Quoted:o(m.Punctuation.create('"'),...l());break;case n.State.Strikethrough:o(m.Punctuation.create("~"),m.Punctuation.create("~"),...l());break;case n.State.Emphasis:o(m.Punctuation.create(B),...l());break;case n.State.Strong:o(...[...q].map(u=>m.Punctuation.create(u)),...l());break;case n.State.Highlight:o(m.Punctuation.create("="),m.Punctuation.create("="),...l());break;case n.State.InlineCode:o(...[...S].map(u=>m.Punctuation.create(u)),...l());break;case n.State.Math:o(...[...j].map(u=>m.Punctuation.create(u)),...l());break;case n.State.LinkText:o(m.Punctuation.create("["),...l());break;case n.State.ReferingUrl:o(new H.SquareQuoted(O),m.Punctuation.create("("),...l());break;case n.State.ReferingID:o(new H.SquareQuoted(O),m.Punctuation.create("["),...l());break;case n.State.ImageText:o(m.Punctuation.create("!"),m.Punctuation.create("["),...l());break;case n.State.ImageReferingUrl:o(m.Punctuation.create("!"),new H.SquareQuoted(D),m.Punctuation.create("("),...l());break;case n.State.ImageReferingID:o(m.Punctuation.create("!"),new H.SquareQuoted(D),m.Punctuation.create("["),...l());break;case n.State.HTMLTag:let s=r.top().begin;return l(),i=s,Bt("<"),1;default:return 0}}function Li(){switch(r.top().state){case n.State.ReferenceLinkUrl:o(new bi.ReferenceDefinition(O,_()));break;case n.State.OrderedListItem:o(new vt.OrderedListItem(y,l()));break;case n.State.UnorderedListItem:o(new yt.UnorderedListItem(y,l()));break;case n.State.BlockquoteItem:o(new qt.BlockquoteItem(C,l()));break;case n.State.BlockCodeBody:o(new Pt.BlockCode(h,I,(0,Ii.parseCode)(_(),h,V,t),!1));break;case n.State.BlockCodeLang:h=_(),o(new Pt.BlockCode(h,I,[],!1,!1));break;case n.State.CalloutItem:M=_(),o(new Mi.Callout(M));break;default:throw new Error(`closing ${r.top().state} is not implemented`)}}function f(s){r.push({state:s,nodes:[],begin:i}),a.add(Si.stateMasks[s])}function o(...s){r.top().nodes.push(...s)}function Di(){if(!r.size())return;let s=r.pop();return a.remove(Si.stateMasks[s.state]),s}function l(){return Di().nodes}function _(){return l().map(s=>s.toMarkdown()).join("")}function w(s){return!(a.mask&s)}function Ti(){if(!w(16))return!1;for(let s of r)for(let u of s.nodes)if(!(0,Ir.isBlank)(u))return!1;return!0}}De.parse=V});var yi=c(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.normalize=void 0;function Tr(e={}){return{ignoreWords:new Set(e.ignoreWords),ignorePatterns:(e.ignorePatterns||[]).map(t=>new RegExp(t,"g"))}}Te.normalize=Tr});var qi=c(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.padBetweenNodes=void 0;var Ur=lt(),v=K();function Ar(e){if(e.length<2)return e;let t=[e[0]];for(let r=1;r<e.length;r++)Nr(e[r-1],e[r],e[r-2],e[r+1])&&t.push(new Ur.Blank(" ")),t.push(e[r]);return t}Ue.padBetweenNodes=Ar;function Nr(e,t,r,a){return(0,v.isBlank)(e)||(0,v.isBlank)(t)||(0,v.isRaw)(e)||(0,v.isRaw)(t)||(0,v.isDocument)(e)||(0,v.isDocument)(t)?!1:(0,v.isPunctuation)(e)?e.needPaddingAfter(t,r):(0,v.isPunctuation)(t)?t.needPaddingBefore(e,a):(0,v.isCJK)(e)?!(0,v.isCJK)(t):(0,v.isLatin)(e)?!(0,v.isLatin)(t):!0}});var Ci=c(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.padRecursively=void 0;var $r=qi();function xi(e){for(let t of e.children)xi(t);e.children=(0,$r.padBetweenNodes)(e.children)}Ae.padRecursively=xi});var Bi=c(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.padMarkdown=void 0;var Er=vi(),Fr=yi(),Qr=Ci();function Hr(e,t){let r=(0,Fr.normalize)(t),a=(0,Er.parse)(e,r);return(0,Qr.padRecursively)(a),a.toMarkdown()}Ne.padMarkdown=Hr});var ji=c($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.padMarkdown=void 0;var Jr=Bi();Object.defineProperty($e,"padMarkdown",{enumerable:!0,get:function(){return Jr.padMarkdown}})});var{padMarkdown:Kr}=ji();module.exports={padMarkdown:Kr};
